# Linux 性能分析和管理

## 常用工具
### 运行状况信息
- `uptime ` 执行结果
    - 系统当前时间 主机已运行时间 用户连接数 1,5,15,分钟的系统平均负载
- `cat /proc/loadavg ` 执行结果
    - 1,5,15分钟的平均负载 当前运行的进程/总进程 最近一个启动的进程的id
- 表示单核:平均负载0.7以下是安全的,大于就需要优化了,多核的情况就是 0.7*N(核心数)

### 内存情况
`free`
- 直接运行得到的就是内存情况,默认是kb为单位,可以指定 -b -m -g (后两种不推荐,因为向下取整的特性,出来的数据有点诡异,)
    - -h 人类可读形式 推荐,能快速看到大略,精准的话还是用 -b
- 运行结果解析:
    - 注意: 如果是新版的free, shared 那一栏总是为0, 因为shared本就是说明进程共享内存容量,
        - free认为不能显示数有效信息, 就抛弃了这个指标,总是显示为0
    - buffers,cached:
        - buffers 是为了写时,解决内存和硬盘巨大速度差存在的缓冲区(块设备IO相关的缓存页)
        - cache 是为了读时,为了尽量减少内存从硬盘读数据的次数,缓冲区(普通文件相关的缓存页)
        - cached 就是cache内存区域已经使用量
    - 空闲内存, 已使用, buffers, cached 共同构成了整个内存容量
    - used 含cache, buffer的内存使用量, free空闲内存, available 可用内存
    
- 设置交换分区:可以单独建立一个分区,也可以使用交换文件,
    - 交换文件的设置在[Linux_file](/Linux/linux_file.md)中,
    - 分区的设置就不多讲了, 主要是fdisk

### 性能查看情况
- `vmstat`


### 进程管理
- 杀掉指定id（需要sudo） `kill -9 pid`
- 杀掉指定名字 不需要sudo `killall -9 name`
